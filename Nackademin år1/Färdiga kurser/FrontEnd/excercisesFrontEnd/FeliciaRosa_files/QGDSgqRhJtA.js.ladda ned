if (self.CavalryLogger) { CavalryLogger.start_js(["hLJ+q"]); }

__d("CollectionCurationReferrerParamNames",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CLICK_REF:"cref"})}),null);
__d("CollectionCurationReferrerTags",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OG_COLLECTION_LINK:1,EGO_REPORT_LINK:2,EGO_REPORT_PLUS_BUTTON:3,EGO_REPORT_HEADER:4,NETEGO_COLLECTION_HEADER:5,NETEGO_COLLECTION_RATING_HEADER:6,SOCIAL_CONTEXT_FACEPILE:7,SOCIAL_PLUS_BUTTON:8,NEWSFEED_QUESTION_LINK:9,EGO_REPORT_NUX_LINK:12,NETEGO_TOP100_HEADER:13,NETEGO_TOP100_STATUSBOX:14,WELCOME_PAGE_LINK:15,SAVED_BOOKMARK:16,ENT_PAGE_ACTION_BAR:17,SAVED_COLLECTION_HEADER:18,COLLECTION_CURATION_FOOTER:19,STORY_ATTACHMENT_FOOTER:20,MOBILE_SAVE_BUTTON_FLYOUT:21,DESKTOP_SAVE_BUTTON_FLYOUT:22,MOBILE_STORY_SAVE_BUTTON_FLYOUT:23,MOBILE_NETEGO_SAVE_BUTTON_FLYOUT:24,MOBILE_PAGE_SAVE_BUTTON_FLYOUT:25,MOBILE_NETEGO_SEE_ALL_LINK:26,MOBILE_PAGE_TOAST_LINK:27,DESKTOP_SAVED_BOOKMARK:28,MOBILE_SAVED_BOOKMARK:29,REMINDER_BOX_TITLE:30,REMINDER_BOX_SEE_ALL_LINK:31,REMINDER_BOX_SEE_MORE_LINK:32,SEARCH_SHORTCUT:33,PAPER_SAVED_TAB:34,DESKTOP_SAVED_FOLLOWUP:35,MOBILE_DUMMY_STORY_SEE_ALL_LINK:36,SAVED_VIDEOS_DUMMY_STORY_SEE_ALL_LINK:37,SAVED_EMAIL_REMINDER:38,MBASIC_SAVED_BOOKMARK:39,MOBILE_PRODUCT_DETAILS_SAVE_BUTTON_FLYOUT:40,DESKTOP_PRODUCT_DETAILS_SAVE_BUTTON_FLYOUT:41,SAVED_NEAR_PLACE_NOTIF:42,SAVED_HEAVY_REMINDER_NOTIF:43,SAVED_COLLECTION_HEADER_DROPDOWN:44,SAVED_DASHBOARD_IN_APP_BROWSER:45,SAVED_DASHBOARD_ME_TAB_SEE_MORE:46,SAVED_ME_TAB_SECTION_HEADER:47,SAVED_PRODUCTS_NOTIF:48,SAVED_PLUGIN_OVERLAY:49,SAVED_NEWSFEED_ENTRY_POINT:50,AIRPORT_SAVED_PLACE_NOTIF:51,SAVED_OFF_FB_NOTIF:52,SAVED_TOAST_RECENT_ITEM_COUNT:53,VIDEO_DOWNLOAD_FINISHED_NOTIF:54,VIDEO_DOWNLOAD_QUOTA_EXCEEDED:55,DAILY_DIALOGUE_PINNED_UNIT:56,SAVED_LIGHT_REMINDER_NOTIF:57,DESKTOP_DUMMY_STORY_SEE_ALL_LINK:58,SAVED_DASHBOARD_IN_APP_BROWSER_MESSENGER:59,MESSENGER_DOT_COM_SAVE_CONFIRMATION:60,VIDEO_DOWNLOAD_LOCAL_PUSH_NOTIF:61,VIDEO_DOWNLOAD_FEED_ROW:62,INLINE_DOWNLOAD:63,SAVED_VIDEOS_REMINDER_NOTIF:64,MOBILE_SHOPPING_BOOKMARK:65,SAVED_CHAT_EXTENSION:66,INSTANT_EXPERIENCES_SAVED_COLLECTION:67,SAVED_COLLECTIONS_PROFILE_TAB:68,SAVED_DASHBOARD_LIST_UPSELL_CARD:69,SAVED_SEE_ALL_LISTS_VIEW_LIST_CARD:70,SAVED_DASHBOARD_SEE_ALL_LIST_BUTTON:71})}),null);
__d("CommerceSaveProductNuxType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({WWW_FIND_SAVED_PRODUCTS:"www_find_saved_products",MSITE_SAVED_PRODUCTS:"msite_saved_products"})}),null);
__d("SaveStateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNSAVED:0,SAVED:1,ARCHIVED:2})}),null);
__d("XCommerceMarkSaveNUXAsSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/commerce/mark-save-nux-seen/",{nux_type:{type:"Enum",required:true,enumType:1}})}),null);
__d("CommerceProductItemImageBrowser.react",["cx","fbt","ix","xuiglyph","AdsVideoPlayer.react","Animation","AsyncRequest","BOFWaterfallLoggerEvent","CollectionCurationMechanisms","CollectionCurationReferrerParamNames","CollectionCurationReferrerTags","CollectionsDisplaySurface","CommerceSaveProductNuxType","CssBackgroundImage.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","Link.react","List.react","React","ReactDOM","SavedStateActions","SaveStateType","ShimButton.react","URI","XCommerceLogger","XCommerceMarkSaveNUXAsSeenController","XSaveController","XSavedForLaterDashboardController","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIGrayText.react","XUISpinner.react","isEmpty"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=c("React").PropTypes,m=530,n=40,o=45,p=c("React").createClass({displayName:"CommerceProductItemImageBrowser",propTypes:{collectionToken:l.string,images:l.array.isRequired,internalPreviewImageIDParam:l.string.isRequired,internalPreviewImageID:l.number,itemID:l.string.isRequired,itemSaveStatus:l.number,logData:l.object.isRequired,shareHref:l.string.isRequired,showSaveNUX:l.bool.isRequired},getInitialState:function q(){var r=this.props.images.map(function(s){return s.id}).indexOf(this.props.internalPreviewImageID);return{itemSaveStatus:this.props.itemSaveStatus,showSaveFlyout:false,showUfiBar:false,selectedImage:r>=0?r:0,shareSpinner:false}},renderLayers:function q(){var r=null;if(this.props.showSaveNUX)r=c("React").createElement("div",{className:"_2tqf _2piq _2pid"},c("React").createElement(c("Image.react"),{src:j("28595")}));if(!this.props.collectionToken)return null;var s=c("XSavedForLaterDashboardController").getURIBuilder().setString("collection_token",this.props.collectionToken).setInt(c("CollectionCurationReferrerParamNames").CLICK_REF,c("CollectionCurationReferrerTags").DESKTOP_PRODUCT_DETAILS_SAVE_BUTTON_FLYOUT).getURI();return c("React").createElement(c("XUIContextualDialog.react"),{contextRef:function(){return this.refs.saveLink}.bind(this),shown:this.state.showSaveFlyout&&this.state.showUfiBar,alignment:"center",position:"above",onToggle:this._onSaveFlyoutToggled,width:c("XUIContextualDialog.react").WIDTH.WIDE,key:"contextualDialog"},c("React").createElement(c("XUIContextualDialogBody.react"),{className:"_2tqf"},c("React").createElement(c("Link.react"),{className:"_4njg",href:"#",onClick:function(){this.setState({showSaveFlyout:false})}.bind(this)},c("React").createElement(c("Image.react"),{src:j("88985")})),r,c("React").createElement(c("XUIGrayText.react"),{display:"block"},i._("Hitta din sparade produkt p\u00e5 fliken {products} i {Saved}.",[i.param("products",c("React").createElement(c("XUIGrayText.react"),{shade:"dark",weight:"bold"},i._("Produkter"))),i.param("Saved",c("React").createElement(c("XUIGrayText.react"),{shade:"dark",weight:"bold"},i._("Sparade")))])," ",c("React").createElement("div",null,c("React").createElement(c("Link.react"),{href:s,target:"_blank"},i._("G\u00e5 till Sparade")),"."))))},_ufiAnimation:{animator:null,delay:0,performInitialDisplay:true},_cancelUfiAnimation:function q(){clearTimeout(this._ufiAnimation.delay);if(this._ufiAnimation.animator)this._ufiAnimation.animator.stop().to("opacity",1).duration(0).go()},componentDidMount:function q(){var r=c("ReactDOM").findDOMNode(this.refs.ufibar);if(r){var s=new(c("Animation"))(r);this._ufiAnimation.animator=s;this._ufiAnimation.delay=setTimeout(function(){s.to("opacity",0).duration(250).go()},1500);this._ufiAnimation.performInitialDisplay=false}},componentWillUnmount:function q(){this._cancelUfiAnimation()},render:function q(){var r=this.props.images,s=r.map(function(y,z){return this._getThumbnailImage(y.uri,z)}.bind(this)),t=null,u=this.props.images[this.state.selectedImage];if(!u.isVideo){var v=this._getBestImageDimension(u.width,u.height),w=v.width,x=v.height;t=c("React").createElement(c("Image.react"),{height:x,width:w,src:u.uri})}else t=c("React").createElement("div",{className:"_fms"},c("React").createElement(c("AdsVideoPlayer.react"),{autoPlay:true,playerHeight:m-n,playerWidth:m,showControls:true,hideCloseButton:true,videoID:u.id}));return c("React").createElement("div",{className:"_56vi"},c("React").createElement(c("FBOverlayContainer.react"),{className:"_56vj",onMouseOver:this._heroImageMouseOver},c("React").createElement(c("FBOverlayBase.react"),null,t),r.length&&r.length>1?c("React").createElement(c("FBOverlayElement.react"),{horizontal:"left"},c("React").createElement("div",null,c("React").createElement(c("ShimButton.react"),{className:"_4-oa _4-ob",inline:true,onClick:this._onClickLeft}))):null,r.length&&r.length>1?c("React").createElement(c("FBOverlayElement.react"),{horizontal:"right"},c("React").createElement("div",null,c("React").createElement(c("ShimButton.react"),{className:"_4-oa _4-oc",inline:true,onClick:this._onClickRight}))):null,this._getUfiBar()),c("React").createElement("div",{className:"_6e_"},s),this.renderLayers())},_getThumbnailImage:function q(r,s){return c("React").createElement(c("CssBackgroundImage.react"),{imageURI:r,className:"_9kl"+(s===this.state.selectedImage?" _57s7":""),onClick:this._onClick,"data-index":s,key:s})},_getBestImageDimension:function q(r,s){var t=r/s;if(t>1)return{width:m,height:m/t};return{width:m*t,height:m}},_getUfiBar:function q(){__p&&__p();var r=this.props.images;if(r[this.state.selectedImage].isVideo)return null;var s=[];if(this.props.shareHref){var t=new(c("URI"))(this.props.shareHref);if(r[this.state.selectedImage].id)t.addQueryData(this.props.internalPreviewImageIDParam,r[this.state.selectedImage].id);s[s.length]=c("React").createElement("li",{key:"share"},c("React").createElement(c("Link.react"),{onClick:function(x){return this._onClickShare(x)}.bind(this),className:"_1tn4"},c("React").createElement(c("Image.react"),{src:j("28596")})," ",i._("Dela")),this.state.shareSpinner?c("React").createElement(c("XUISpinner.react"),{background:"light",size:"small"}):null)}if(this.state.itemSaveStatus!==null){var u=this.state.itemSaveStatus===c("SaveStateType").SAVED,v=u?j("88844"):j("28594"),w=u?i._("Sparat"):i._("Spara");s[s.length]=c("React").createElement("li",{key:"save"},c("React").createElement(c("Link.react"),{onClick:u?this._handleUnsaveItem:this._handleSaveItem,className:"_1tn4"},c("React").createElement(c("Image.react"),{className:"_qpz",ref:"saveLink",src:v})," ",w))}return(this._ufiAnimation.performInitialDisplay||this.state.showUfiBar)&&!c("isEmpty")(s)?c("React").createElement(c("FBOverlayElement.react"),{ref:"ufibar",vertical:"bottom"},c("React").createElement(c("List.react"),{direction:"horizontal",border:"medium",spacing:"small",className:"_1tn5"},s)):null},_onClick:function q(event){var r=Number(event.currentTarget.dataset.index);if(this.state.selectedImage!=r)c("XCommerceLogger").logEvent(c("BOFWaterfallLoggerEvent").ACTN_CHANGE_PRODUCT_DETAILS_IMAGE,this.props.logData);this.setState({selectedImage:r,showUfiBar:false})},_onClickLeft:function q(event){var r=this.state.selectedImage-1;if(r<0)r+=this.props.images.length;this.setState({selectedImage:r,showUfiBar:false})},_onClickRight:function q(event){var r=(this.state.selectedImage+1)%this.props.images.length;this.setState({selectedImage:r,showUfiBar:false})},_onClickShare:function q(event){c("XCommerceLogger").logEvent(c("BOFWaterfallLoggerEvent").ACTN_SHARE_ARROW_CLICK,this.props.logData);new(c("AsyncRequest"))().setURI(this.props.shareHref).setFinallyHandler(function(){return this.setState({shareSpinner:false})}.bind(this)).send();this.setState({shareSpinner:true})},_heroImageMouseOver:function q(event){this._cancelUfiAnimation();this.setState({showUfiBar:true})},_handleSaveItem:function q(){this._updateItemSaveState(c("SaveStateType").SAVED,c("SavedStateActions").SAVE,this._showSaveFlyout)},_showSaveFlyout:function q(){if(this.state.itemSaveStatus!==c("SaveStateType").SAVED)return;this.setState({showSaveFlyout:true,showUfiBar:true},function(){var r=c("XCommerceMarkSaveNUXAsSeenController").getURIBuilder().setEnum("nux_type",c("CommerceSaveProductNuxType").WWW_FIND_SAVED_PRODUCTS).getURI();new(c("AsyncRequest"))().setURI(r).send()})},_onSaveFlyoutToggled:function q(r){if(r!==this.state.showSaveFlyout)this.setState({showSaveFlyout:r})},_handleUnsaveItem:function q(){this._onSaveFlyoutToggled(false);this._updateItemSaveState(c("SaveStateType").UNSAVED,c("SavedStateActions").UNSAVE,function(){})},_updateItemSaveState:function q(r,s,t){var u=this.state.itemSaveStatus;this.setState({itemSaveStatus:r});var v=c("XSaveController").getURIBuilder().setInt("object_id",this.props.itemID).setEnum("action",s).setEnum("surface",c("CollectionsDisplaySurface").PRODUCT_DETAILS_PAGE).setEnum("mechanism",c("CollectionCurationMechanisms").TOGGLE_BUTTON).getURI();new(c("AsyncRequest"))().setURI(v).setHandler(t).setErrorHandler(function(){this.setState({itemSaveStatus:u})}.bind(this)).send()}});f.exports=p}),null);
__d("CommerceProductView",["CSS","Event","$"],(function a(b,c,d,e,f,g){var h={toggleBlurb:function i(j,k){c("Event").listen(j,"click",function(l){c("CSS").toggleClass(c("$")(k),"truncated")})}};f.exports=h}),null);